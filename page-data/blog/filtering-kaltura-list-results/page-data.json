{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/filtering-kaltura-list-results","result":{"data":{"markdownRemark":{"html":"<p><a href=\"http://corp.kaltura.com\" target=\"_blank\">Kaltura</a> is a video platform and content delivery network (CDN). The <a href=\"http://www.kaltura.com/api_v3/testmeDoc/index.php\" target=\"_blank\">Kaltura API</a> is powerful but poorly documented, so usually it takes a lot of trial and error to figure out how to do something.</p>\n<p>Here's an example of how to pull down a list of videos filtered on search terms:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">require_once</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'path/to/KalturaClient.php'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// credentials</span>\n<span class=\"token variable\">$partner_id</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'yourPartnerId'</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'ANONYMOUS'</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$password</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'yourAdminPassword'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// connect to Kaltura</span>\n<span class=\"token variable\">$config</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">KalturaConfiguration</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$partner_id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$config</span><span class=\"token operator\">-></span><span class=\"token property\">serviceUrl</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'http://www.kaltura.com/'</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$client</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">KalturaClient</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$client</span><span class=\"token operator\">-></span><span class=\"token function\">setKs</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$client</span><span class=\"token operator\">-></span><span class=\"token property\">session</span><span class=\"token operator\">-></span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$password</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$user</span><span class=\"token punctuation\">,</span> <span class=\"token class-name static-context\">KalturaSessionType</span><span class=\"token operator\">::</span><span class=\"token constant\">ADMIN</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// filter entries</span>\n<span class=\"token variable\">$filter</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">KalturaMediaEntryFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$filter</span><span class=\"token operator\">-></span><span class=\"token property\">orderBy</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">KalturaMediaEntryOrderBy</span><span class=\"token operator\">::</span><span class=\"token constant\">CREATED_AT_DESC</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$filter</span><span class=\"token operator\">-></span><span class=\"token property\">mediaTypeEqual</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// video</span>\n<span class=\"token variable\">$filter</span><span class=\"token operator\">-></span><span class=\"token property\">searchTextMatchOr</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'this, that, something else'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// find entries with any of these terms</span>\n\n<span class=\"token comment\">// get entries</span>\n<span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$client</span><span class=\"token operator\">-></span><span class=\"token property\">media</span><span class=\"token operator\">-></span><span class=\"token function\">listAction</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$filter</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>As indicated by the name, they apply either AND or OR logic to the terms you supply them. The <code class=\"language-text\">tagsLike</code> method only accepts a single tag which is a little confusing since the name is plural. All the other methods will take multiple search terms in a comma-separated list. Spaces are treated as part of the search term. For a full list see the <a href=\"http://www.kaltura.com/api_v3/testmeDoc/index.php?object=KalturaBaseEntryBaseFilter\" target=\"_blank\">API documentation</a>.</p>\n<p>You can combine them to create layers of filters. For example, this would get all entries with the tag \"building\", and then filter those results for entries with one or more of the search terms:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token variable\">$filter</span><span class=\"token operator\">-></span><span class=\"token property\">tagsLike</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'building'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// must have this tag</span>\n<span class=\"token variable\">$filter</span><span class=\"token operator\">-></span><span class=\"token property\">searchTextMatchOr</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'big, red, barn'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// plus any of these terms</span></span></code></pre></div>\n<p>If you want to limit the number of results and/or paginate them, you can add a pager. Just remember to pass it to your listAction call as the second parameter. This example returns the first 3 results (3 per page, page 1):</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// pager</span>\n<span class=\"token variable\">$pager</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">KalturaFilterPager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$pager</span><span class=\"token operator\">-></span><span class=\"token property\">pageSize</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$pager</span><span class=\"token operator\">-></span><span class=\"token property\">pageIndex</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// get entries</span>\n<span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$client</span><span class=\"token operator\">-></span><span class=\"token property\">media</span><span class=\"token operator\">-></span><span class=\"token function\">listAction</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$filter</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$pager</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>","frontmatter":{"title":"Filtering Kaltura list results","date":"September 12, 2013","tags":["kaltura","php"]},"fields":{"slug":"/blog/filtering-kaltura-list-results"}}},"pageContext":{"title":"Filtering Kaltura list results","prev":{"frontmatter":{"title":"Using Twitter's typeahead.js","tags":["javascript"]},"excerpt":"I decided to try out Twitter's typeahead.js the other day. It was bit confusing at first because I kept finding examples and tutorials that…","fields":{"slug":"/blog/using-twitters-typeahead-js"}},"next":{"frontmatter":{"title":"Using Google web fonts","tags":["css"]},"excerpt":"Today I tried switching a website to web fonts. It was pretty easy to implement using Google Fonts. 1. Choose a font Go to Google Fonts and…","fields":{"slug":"/blog/using-google-web-fonts"}}}},"staticQueryHashes":["3649515864","63159454"]}