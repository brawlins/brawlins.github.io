{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/apache-redirect-vs-rewrite","result":{"data":{"markdownRemark":{"html":"<p>Apache rewrite rules can be very confusing at times. They're very powerful, but not easily understood or mastered. I don't claim to be an expert by any means, but I recently came to some clarity on this issue:</p>\n<blockquote>\n<p>What is the difference between Apache redirect and rewrite?</p>\n</blockquote>\n<h2>Redirect</h2>\n<p>A redirect is a server response that tells the client to make a new, modified request. The dialog goes something like this:</p>\n<style>\n    .dialog { font-family: andale mono, times; font-style: normal; }\n</style>\n<blockquote>\n<p class=\"dialog\">Client: “GET /page.php.”</p>\n<p class=\"dialog\">Server: “Sorry, /page.php has moved. Ask for /otherpage.php instead”.</p>\n<p class=\"dialog\">Client: “Fine. GET /otherpage.php then.”</p>\n<p class=\"dialog\">Server: “OK. Here’s the content of /otherpage.php.”</p>\n</blockquote>\n<p>Because a second request is made, now for a different resource, the URL changes in the browser's address bar. The user is aware that his original request has been redirected to something different than what he typed.</p>\n<p>The redirect rule in your .htaccess file would look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">Redirect <span class=\"token number\">301</span> /page.php /otherpage.php</code></pre></div>\n<p>You can send whatever response code is appropriate. If you don't give one, a 302 response will be sent, which is the default for a redirect. See the <a href=\"http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#3xx_Redirection\" target=\"_blank\">list of HTTP status codes</a> for more information.</p>\n<h2> Rewrite</h2>\n<p>A rewrite maps the requested path to some different path on the server, based on whatever rewrite rules are defined. The server does this without notifying the client, and then serves up the content from the new path. It goes something like this:</p>\n<blockquote>\n<p class=\"dialog\">Client: “GET /page.php.”</p>\n<p class=\"dialog\">Server: “Let me consult the rewrite rules. Ok, it looks like all requests for /page.php should be served from /otherpage.php. Here’s the content of /otherpage.php.”</p>\n</blockquote>\n<p>The original request was fulfilled by <strong>substituting a different path</strong> for the one that was requested. The client is unaware that the content being served came from <code class=\"language-text\">/otherpage.php</code> because the URL remains unchanged in the address bar.</p>\n<p>The rewrite rule in your <code class=\"language-text\">.htaccess</code> file would look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"apacheconfig\"><pre class=\"language-apacheconfig\"><code class=\"language-apacheconfig\">RewriteEngine On\nRewriteRule /page.php /otherpage.php</code></pre></div>\n<p>Rewriting is often used to map pretty URLs (that make sense to the user) to uglier ones on the server that actually retrieve the content. Using this technique you can take a request for something like <code class=\"language-text\">/shoes/running/nike</code> and map it to a script that serves the correct content based on query string variables, such as <code class=\"language-text\">/products.php?product=shoes&amp;type=running&amp;brand=nike</code>. You probably don't want the user to be redirected to that ugly URL, so you just rewrite it to whatever it needs to be on the server side and serve up the contents. Nobody needs to know what's going on behind the scenes.</p>\n<p>However, if you DO want the user to be redirected to the new path, you can force a redirect by using the <code class=\"language-text\">[R]</code> flag after your rule:</p>\n<div class=\"gatsby-highlight\" data-language=\"apacheconfig\"><pre class=\"language-apacheconfig\"><code class=\"language-apacheconfig\">RewriteRule /page.php /otherpage.php [RL]</code></pre></div>\n<p>Usually you want to stop rewriting at this point, so you should also include the <code class=\"language-text\">[L]</code> flag to make this the last rule that gets evaluated. Otherwise, any rewrite rules that follow this one will also be applied before the redirect happens, which could result in the user being redirected to the wrong place.</p>\n<h2>Examples of redirects</h2>\n<p>This rule will redirect all requests to another site:</p>\n<div class=\"gatsby-highlight\" data-language=\"apacheconfig\"><pre class=\"language-apacheconfig\"><code class=\"language-apacheconfig\"># Redirect all requests to another site\nRedirectMatch 301 .* http://example.com</code></pre></div>\n<p>This one redirects from one directory to another directory:</p>\n<div class=\"gatsby-highlight\" data-language=\"apacheconfig\"><pre class=\"language-apacheconfig\"><code class=\"language-apacheconfig\"># Redirect requests from one directory to another directory\nRedirectMatch ^/directory/(.*) /other-directory/$1</code></pre></div>\n<p>Here <code class=\"language-text\">$1</code> is a back-reference to the portion of the pattern in parentheses. So anything beyond the directory will remain the same.</p>","frontmatter":{"title":"Apache redirect vs. rewrite","date":"February 24, 2014","tags":["apache"]},"fields":{"slug":"/blog/apache-redirect-vs-rewrite"}}},"pageContext":{"title":"Apache redirect vs. rewrite","prev":{"frontmatter":{"title":"Import tags from a CSV","tags":["wordpress"]},"excerpt":"Recently I needed to add a large list of tags to a WordPress site. The tags were in a spreadsheet, so I converted it to a CSV file and then…","fields":{"slug":"/blog/import-tags-from-a-csv"}},"next":{"frontmatter":{"title":"Restore selected posts from a backup","tags":["mysql","wordpress"]},"excerpt":"Recently at work we had a situation where we needed to roll back to the previous day's backup of our WordPress site to undo some changes…","fields":{"slug":"/blog/restore-selected-posts-from-a-backup"}}}},"staticQueryHashes":["3649515864","63159454"]}